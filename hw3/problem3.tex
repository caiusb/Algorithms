%!TEX root = main.tex
\problem{3}

\paragraph{Encoding the problem statement in terms of assignment problems}

Let $N$ be the set of all devices.

Let $(x, y)$ with $ x, y \in N$ be backup pairs where device $x$ is backed up by device $y$. It follows that that two devices can form a backup pair only if they are in distance of each other, $d[x, y] \leq D$.

Let $S$ be a valid backup scheme. Then $S = \{(x_S, y_S) | x_S, y_S \in N \}$ where the following constraints hold:

\begin{itemize}

	\item Device $x_S$ must be backed up exactly $k$ times: $c(x_S) = k$.
	
	\item All devices must be backed up: $\bigcup_{x_S \in N} x_s = N $
	
	\item Device $y_S$ must backup at most $b$ devices: $c(y_S) \leq b$.
	
	\item Device $y_S$ can either backup $x_S$ or not: $c(x_S, y_S) \leq 1$.

\end{itemize}

We can observe the following properties:
\begin{enumerate}
	\item In a viable backup scheme there are $|N| * k$ backups.
	
	\item For a viable backup scheme to exist, $|N| *k \leq |N| * b$. This means that $k \leq b$.
\end{enumerate}

\paragraph{Solving the problem to max flow}

We solve the problem via max flow using the following algorithm:
\\

$Alg(N, d[1..n, 1..n], k, b, D):$
\begin{enumerate}

	\item Construct directed graph $G=(X \cup Y \cup \{s, t\}, E)$, $ X=Y=\{ vertice_i | \forall{n_i \in N \text{ $vertice_i$ represents $n_i$}}\}$.
	
	\item Construct edges $E = \{ x \rightarrow y \} \cup \{ s \rightarrow x \} \cup \{ y \rightarrow t \}$ such that $x \in X, y \in Y$. Edges  $x \rightarrow y$ are constructed only for devices where $d[x, y] \leq D$ and have the meaning that the device represented by vertice $x$ can be backed up by the device represented by vertex $y$.
	
	\item Assign the following capacities:
	\begin{itemize}
	
		\item $C(s \rightarrow x) = k$
		
		\item $C(x \rightarrow y) = 1$
		
		\item $C(y \rightarrow t) = b$
	
	\end{itemize}
	
	Figure \ref{fig:graph} shows the graph obtained up to this point.
	
	\item Compute the maximum flow $f^*$.
	
	\item If $|f^*| \neq |N| * k$ report that no viable backup scheme exists.
	
	\item If ${|f^*| = |N| * k}$ report the viable backup scheme ${S = \{ (x_S, y_S) | f(x_S \rightarrow y_S) = 1) \}}$.

\end{enumerate}

\begin{figure}[h!]
	\centering
		\includegraphics[width=\textwidth]{graph}
    
	\caption{The directed graph for the backup problem together with edge capacities.}
	\label{fig:graph}
\end{figure}





